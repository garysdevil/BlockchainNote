---
created_date: 2022-12-28
---

[TOC]




## 传统的随机数方案
1. 方案一： 随机预言机RO(Random Oracle)，对于不同的输入，可以产生均匀分布的随机数，对于相同的输入，得到的输出一定是相同的。但接收者必须简单的相信随机数是从输入值计算得来的。
2. 方案二： 带密钥的哈希函数，也可在有限数值区间内生成均匀分布的随机数。但如果要验证，必须暴露种子，一旦种子暴露给了敌手，敌手就可以计算出所有其它点对应的值，而不只是你想公布出去的某个点的值。

- 问题： 没法验证随机数的确是由输入值产生的。

## VRF
- 可验证随机函数（Verifiable Random Functions）
- 定义： 
    1. 给定一个密钥，对于不同的输入值，可生成均匀分布的随机数和对应的proof。
    2. 在不暴露密钥的情况下，敌手无法预测其它输入值对应的随机值。
    3. 任何人都可以通过随机值和proof来验证此随机值的真实性。
- 特点
    1. 随机性
    2. 唯一性
    3. 可验证性
- VRF在POS共识中的使用例子
    - 假设： 现在是round 10（第10 轮），节点们可能会轮流抽签，以节点自己的私钥 + 一个全网都知道的随机数（比如是这轮的轮次10）作为输入，生成了一个随机数（0-100）；
    - 设置一个条件： 100 个节点轮流抽签，谁先抽出来的随机数大于10，就是这一轮的打包者。
    - 假设： 5 号节点抽到了11，可是只有5 号知道其他人不知道，因此他在广播这个随机的同时还需要广播一个零知识证明。通过零知识证明，全网只需要通过5 号的公钥就可以验证，接受5 号为这轮打包者。

## VDF 
- 可验证延迟函数（Verifiable Delay Function）
- Boneh等人2018年论文《Verifiable Delay Functions》 https://eprint.iacr.org/2018/601.pdf
- 定义： 
    1. 给定一个函数，输入一个值，执行N次运行，每一次运算的输入值为上一次的输出值，经过N次或一定时间后，输出结果和proof。
- VDF特点
    1. 随机性
    2. 唯一性
    3. 可验证性
    4. 串行性： 只能顺序运算，无法通过增加计算设备而使运算时间变短。


- VDF + RANDAO
  - RANDAO 是以太坊系统利用经济模式（奖励跟处罚）的方式，多个节点通过质押进行参与，在链上产生随机变量的一种机制。
  - RANDAO 有个缺点，就是最后一个节点可以预测/操纵结果。（最后一个节点也可能会受到惩罚）。
  - VDF + RANDAO 解决就是最后一个节点可以预测/操纵随机数的问题。

- vs POW
    1. 计算和验证都是非对称的。
    2. pow可以并行运算，VDF只能串行计算。
    3. 而对于给定输入x，VDF拥有唯一的输出(这也是为什么它被称作函数)，而POW的解可以有多个。

